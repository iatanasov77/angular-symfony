<div class="container view">
    <header>
        <h3>Contacts</h3>
    </header>

    <div>
        <a class="nav-pills hover" href="#/add-contact">Add Contact</a>
    </div>
    <br /><br />

    <div ng-controller="ContactsController">
        <div class="row">
            <div class="alert alert-info" data-ng-bind="message.text" data-ng-show="message"></div>
        </div>
        <div class="row">
            <div class="pull-left">

                <select class="form-control" data-ng-model="request.ipp" data-ng-change="getContacts()">
                    <option value="5">5</option>
                    <option value="10">10</option>
                    <option value="50">50</option>    
                </select>
                Items Per Page

            </div>
            <div class="pull-right">
                <form data-ng-submit="getContacts()">
                    <select class="form-control" data-ng-model="request.search.key">
                        <option value="firstName">First Name</option>
                        <option value="lastName">Last Name</option>
                        <option value="email">Email</option>    
                    </select>
                    <input type="text" data-ng-model="request.search.val" class="form-control" placeholder="Search">
                    

               </form>
            </div>
        </div>

        <table class="table table-striped table-condensed table-hover">
            <thead>
                <tr>
                    <th class="id">
                        <a data-ng-click="setOrder('id')">Id&nbsp;
                            <span data-ng-show="request.orderBy=='id'">
                                <span data-ng-show="request.orderDir=='DESC'" class="icon-arrow-up"></span>
                                <span data-ng-show="request.orderDir=='ASC'" class="icon-arrow-down"></span>
                            </span>
                        </a>
                    </th>
                    <th class="firstName">
                        <a ng-click="setOrder('firstName')">First Name&nbsp;
                            <span data-ng-show="request.orderBy=='firstName'">
                                <span data-ng-show="request.orderDir=='DESC'" class="icon-arrow-up"></span>
                                <span data-ng-show="request.orderDir=='ASC'" class="icon-arrow-down"></span>
                            </span>
                        </a>
                    </th>
                    <th class="lastName">
                        <a ng-click="setOrder('lastName')">Last Name&nbsp;
                            <span data-ng-show="request.orderBy=='lastName'">
                                <span data-ng-show="request.orderDir=='DESC'" class="icon-arrow-up"></span>
                                <span data-ng-show="request.orderDir=='ASC'" class="icon-arrow-down"></span>
                            </span>
                        </a>
                    </th>
                    <th class="email">
                        <a ng-click="setOrder('email')">Email&nbsp;
                            <span data-ng-show="request.orderBy=='email'">
                                <span data-ng-show="request.orderDir=='DESC'" class="icon-arrow-up"></span>
                                <span data-ng-show="request.orderDir=='ASC'" class="icon-arrow-down"></span>
                            </span>
                        </th>
                    <th class="address">Address</th>
                    <th class="firstPhone">First Phone</th>
                    <th></th>
                    <th></th>
                </tr>
            </thead>
            
            <tbody>
                <tr ng-repeat="item in contacts">
                    <td>{{item.id}}</td>
                    <td>{{item.firstName}}</td>
                    <td>{{item.lastName}}</td>
                    <td>{{item.email}}</td>
                    <td>{{item.address}}</td>
                    <td>{{item.phones[0].phoneNumber}}</td>
                    <td><a ng-click="editContact(item.id)" class="icon-edit" href="javascript:void(0);"></a></td>
                    <td><a ng-click="removeContact(item.id)" class="icon-remove" href="javascript:void(0);"></a></td>
                </tr>
            </tbody>
        </table>

        <div class="pagination pull-right">
            <ul>
                <li data-ng-class="{disabled: request.page == 1}">
                    <a href data-ng-click="setPage(request.page-1)">« Prev</a>
                </li>
                <li data-ng-repeat="p in range"
                    data-ng-class="{active: p == request.page}"
                    data-ng-click="setPage(p)">
                    <a href data-ng-bind="p">1</a>
                </li>
                <li data-ng-class="{disabled: request.page == range.length}">
                    <a href data-ng-click="setPage(request.page+1)">Next »</a>
                </li>
            </ul>
        </div>
    </div>
</div>

{% extends "IAApplicationBundle::layout.html.twig" %}
{% block title %}{{ parent() }} :: List Projects{% endblock %}

{% block content %}
    <div align="center">
        <form name="listProjects" method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>">
            <table id="listTable" width="70%" border="1" cellspacing="0" cellpadding="5">
                <caption>Projects</caption>
                <tr>
                    <th width="10%">N</th>
                    <th>Title</th>
                    <th colspan="3" width="20%">Action</th>
                </tr>
                {% for prj in projects %}
                    <tr>
                        <td>
                            <input type="checkbox" name="active[{{ prj.getId() }}]" <?php  if($prj->active): ?>checked="checked"<?php endif; ?> />
                                   {{ prj.getId() }}
                        </td>
                        <td><a href="{{ path('ia_web_content_thief_edit_project', {'id': prj.getId()}) }}">{{ prj.getProjectTitle() }}</a></td>
                        <td><a href="{{ path('ia_web_content_thief_copy_project', {'id': prj.getId()}) }}">Copy</a></td>
                        <td><a href="{{ path('ia_web_content_thief_run_project', {'id': prj.getId()}) }}">Run</a></td>
                        <td><a id="btnDelete" href="{{ path('ia_web_content_thief_delete_project', {'id': prj.getId()}) }}">Delete</a></td>
                    </tr>
                {% endfor %}
            </table>
            <table width="70%" style="margin: 20px 0 0 0;">
                <tr>
                    <td align="right">
                        <input type="submit" name="submit" value="Save" />
                    </td>
                </tr>
            </table>

        </form>
    </div>
{% endblock %}

{% block endDocumentScripts %}
    {{ parent() }}
    <script type="text/javascript">
        jQuery("#btnDelete").on("click", function(e) {
            var link = this;
            e.preventDefault();

            jQuery("<div>Do you want to delete this Project?</div>").dialog({
                buttons: {
                    "Ok": function() {
                        window.location = link.href;
                    },
                    "Cancel": function() {
                        jQuery(this).dialog("close");
                    }
                }
            });
        });
    </script>
{% endblock %}
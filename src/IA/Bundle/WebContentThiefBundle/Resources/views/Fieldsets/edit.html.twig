{% extends "IAApplicationBundle::layout.html.twig" %}
{% block title %}{{ parent() }} :: Edit Fieldset{% endblock %}

{% block pageTitle %}<i class="icon_genius"></i> Edit Fieldset{% endblock %}

{% block content %}
    <div class="col-lg-12">
        <section class="panel">
            <header class="panel-heading"> Edit Fieldset </header>
            <div class="panel-body">
                {{ form_start(form, { 'attr': {'class': 'form-horizontal '} }) }}
                    <div class="form-group">
                        {{ form_label(form.title, null, {
                            'label_attr': {'class': 'col-sm-2 control-label'}
                            }) 
                        }}
                        <div class="col-sm-10">
                            {{ form_widget(form.title, {'attr': {'class': 'form-control'}}) }}
                        </div>
                    </div>
                    <div class="form-group">
                        <ul id="fields-list" data-prototype="{{ form_widget(form.fields.vars.prototype)|e }}">
                            {% for field in form.fields %}
                                <li>
                                    {{ form_widget(field) }}
                                </li>
                            {% endfor %}
                        </ul>
                        <a href="#" id="add-another-field">Add</a>
                        
                    </div>
                    
                    <div class="form-group">
                        <label class="col-sm-2 control-label required" for="FormFieldset_fields">Fields</label>
                        <div class="col-sm-10">
                            <div class="col-lg-4">
                                <input type="text" class="form-control" />
                            </div>
                            <div class="col-lg-2">
                                <select class="form-control m-bot15">
                                    <option>Choose Type</option>
                                    <option>1</option>
                                    <option>2</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    {{ form_widget(form.btnSave, {'attr': {'class': 'btn btn-primary', 'id':'btnSave'}}) }}
                    {{ form_widget(form.btnCancel, {'attr': {'class': 'btn btn-default', 'id':'btnCancel'}}) }}
                {{ form_end(form) }}
            </div>
        </section>
        <a href="#" id="btnAddField">Add Field</a>
        
    </div>
{% endblock content %}

{% block endDocumentScripts %}
    {{ parent() }}
    <script type="text/javascript">
        jQuery(function () {
            jQuery("#btnAddField").on('click', function (e) {
                jQuery("#popup").dialog({modal: true}).dialog('open').load("{{ path('ia_web_content_thief_fieldsets_add_field') }}");
            });
        });

    
    </script>
    
    
    <script type="text/javascript">
    // keep track of how many email fields have been rendered
    var fieldsCount = '{{ form.fields | length }}';

    jQuery(document).ready(function() {
        jQuery('#add-another-field').click(function(e) {
            e.preventDefault();

            var fieldsList = jQuery('#fields-list');

            // grab the prototype template
            var newWidget = fieldsList.attr('data-prototype');
            // replace the "__name__" used in the id and name of the prototype
            // with a number that's unique to your emails
            // end name attribute looks like name="contact[emails][2]"
            newWidget = newWidget.replace(/__name__/g, fieldsCount);
            fieldsCount++;

            // create a new list element and add it to the list
            var newLi = jQuery('<li></li>').html(newWidget);
            newLi.appendTo(fieldsList);
        });
    })
</script>
{% endblock endDocumentScripts %}
